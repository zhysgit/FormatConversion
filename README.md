# FormatConversion.exe 批量转化功能提供程序

## 程序简介
本程序是基于威视达康“视频播放器”软件中的 MP4Convert.exe 程序开发的，用于批量转换威视达康监控器存储卡中的视频文件格式。它能够将存储卡中的 .h264 视频文件转换为通用的 .mp4 格式，使其可以在各大视频播放器中正常播放。

## 使用方法

### 程序放置
将“FormatConversion.exe”文件放置在威视达康“视频播放器”软件的安装目录下，确保该目录中包含 MP4Convert.exe 程序。

![插图1](/markdown/屏幕截图%202025-01-22%20202514.png "文件目录")

### 启动程序
打开终端（命令提示符或 PowerShell），输入以下命令并按回车键开始转换：
`.\FormatConversion.exe [待处理文件目录] [输出文件目录]`

示例：

`.\FormatConversion.exe D:\InputVideos D:\OutputVideos`

![插图2](/markdown/屏幕截图%202025-01-22%20202824.png "终端窗口")

### 日志文件
转换过程中，程序会在待处理目录下生成一个名为“log.txt”的文本文件，记录转换过程的日志信息。请注意，本程序未对转换后的视频帧率进行特别设置，因此转换后的视频帧率与原视频保持一致。且日志文件中因此会出现一些错误信息，但可以忽略。

## 输入参数说明
- **待处理目录**：包含 .h264 视频文件的目录路径。
- **输出文件目录**：转换后的 .mp4 视频文件将存储的目录路径。

## 程序返回参数说明
- **返回 1**：参数输入错误，请检查命令格式是否正确。
- **返回 2**：指定的目录不存在，请检查路径是否正确。
- **返回 3**：在指定目录中未找到 .h264 文件。
- **返回 4**：无法启动转换进程，请检查程序是否完整或是否有权限问题。
- **返回 5**：在处理文件时发生错误，请参考日志文件排查问题。
- **返回 0**：转换成功完成。
